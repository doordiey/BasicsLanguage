# 函数

>   在python中一个有用的工具就是函数。和别的程序语言中一样，函数可以使你将一个大的项目分散成小的简单的各个部分。这使得你的代码变得更加容易阅读。能更好的进行代码复用和重构。
>
>   在python中函数有很多额外的特性使得你的程序变得更简单。有一些别的语言也有的，有的是python所特有的。这些额外的特性使得函数的目的更加明显。  这样可以使在调用函数时十分容易的知道函数是在做什么。在查找bug时也变得更加容易。

## 项目14： 返回异常而不是返回None

  当编写实用程序函数时，python程序员总是会将返回None值有一些特殊的含义。这在一些情况下是很有用的。举个例子，如果你想要用一个辅助函数去计算除法运算。那么假设除数为0时返回None是正常的。

```python
def divide(a, b):
    try:
        return a / b
    except ZeroDivisionError:
        return None
```

  这样编写代课可以相应的解释其返回值。

```python
result = divide(x, y)
if result is None:
    print('Invalid inputs')
```

  当分子为0的时候会发生什么？这会导致返回值也为0.当你在if的语句下进行判断时，可能会导致问题。你可能会得到一些其它的为False的判断，而不是只寻找none的情况,如下：

```python
x, y =0, 5
result = divide(x, y)
if not result:
    print('Invalid inputs')
```

  当None是有特殊含义时，这样的写法在python代码中是一个常见的错误。这就是为什么从一个函数中返回none是一个容易出现错误原因。有两个方法可以去减少类似这样的错误。

  第一个方法是将返回的值变成一个含有两个值的元组。第一部分是标识操作是成功的还是失败的。第二部分是他实际的计算结果。

```python 
def divide(a, b):
    try:
        return True, a / b
    except ZeroDivisionError:
        return False, None
```

  调用这个函数后需要分析返回的元组，这就使得在得到结论时不光要看除法得结果还要看元组的撞他部分。

```python
success, resule = divide(x, y)
if not success:
    print('Invalid')
```

  这个问题在于调用者容易忽略返回元组的第一部分，如下面所示，咋一眼看上去没有什么问题，然而它实际上是错误的。

```python
_,result = divide(x, y)
if not result:
    print('Invalid')
```

  第二个方法会处理的更好一些，它不返None,而实返回一个异常出去，让调用函数保护的人去处理它。

```python
def divide(a, b):
    try:
        return True, a / b
    except ZeroDivisionError as e:
        return ValueError('Invalid ') from e
```

  用这样的方法的话，调用者就必须要处理非法输入的情况。下面的例子可以清晰的看到调用函数的人的处理。

```python
x, y = 5, 2
try:
    result = divide(x, y)
except ValueError:
    print('Invalid')
else:
    print(result)
```

### 一些需要记住的事情

- 当函数返回None是具有特殊含义的话，在返回进行逻辑判断是否为None时可能会被一些其它的逻辑判断为False的值干扰。
- 引发异常以指示特殊情况，而不是返回None。记录下来后，期望调用代码能够正确处理异常。

## 项目15：了解封闭如何与可变作用域相互影响

  假设你要对数字列表进行排序，但要优先考虑一组数字得排在前面。这种情况的话你可以使用此模式。一个常用的情况是将一个